---
import { NavButton } from "/src/elements/NavButton";

const routes = [
  { name: "Dashboard", path: "/" },
  { name: "Materiais", path: "/materiais/" },
  { name: "Fornecedores", path: "/fornecedores/" },
  { name: "Compras", path: "/compras/" },
  { name: "Usuários", path: "/usuarios/" },
  { name: "Clientes", path: "/clientes/" },
  { name: "Orçamentos", path: "/orcamentos/" },
  { name: "Ordens", path: "/ordens/" },
  { name: "Pedidos", path: "/pedidos/" },
  { name: "Serviços", path: "/servicos/" },
];
---

<aside
  class="bg-slate-800 p-4 gap-3 flex md:flex-col navBar md:fixed md:h-full not-md:w-full not-md:overflow-scroll"
>
  <div
    id="idCard"
    class="p-1 md:p-2 text-white font-semibold rounded-md not-md:bg-slate-600 not-md:flex not-md:items-center"
  >
    <p class="not-md:hidden">Olá</p>
    <span transition:persist="userName" id="userName" class="not-md:p-1"
      >...</span
    >
  </div>
  {
    routes.map((route) => {
      return <NavButton name={route.name} path={route.path} client:load />;
    })
  }
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const role = localStorage.getItem("apiRole");
      const name = localStorage.getItem("apiName");
      // if (role == undefined) {
      //   document.location.href = "login/";
      // }
      const userNameSpan = document.getElementById(
        "userName",
      ) as HTMLSpanElement;
      userNameSpan.innerText = name || "";
    });
  </script>
</aside>
